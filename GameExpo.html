<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="hero_title">GAME SALE EXPO 2025 - The Biggest Game Sale Event</title>
  <meta name="description" content="Discover amazing deals on your favorite games at the Game Sale Expo 2025. Limited time offers and exclusive bundles available." />
  <meta name="generator" content="v0.dev" />
  <!-- Google Fonts: Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- PapaParse 用於解析 CSV -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <style>
    /* 自定義 CSS 變數 (globals.css) */
    :root {
      --background: 0 0% 100%;
      --foreground: 0 0% 3.9%;
      --card: 0 0% 100%;
      --card-foreground: 0 0% 3.9%;
      --popover: 0 0% 100%;
      --popover-foreground: 0 0% 3.9%;
      --primary: 24 100% 50%;
      --primary-foreground: 0 0% 98%;
      --secondary: 0 0% 96.1%;
      --secondary-foreground: 0 0% 9%;
      --muted: 0 0% 96.1%;
      --muted-foreground: 0 0% 45.1%;
      --accent: 0 0% 96.1%;
      --accent-foreground: 0 0% 9%;
      --destructive: 0 84.2% 60.2%;
      --destructive-foreground: 0 0% 98%;
      --border: 0 0% 89.8%;
      --input: 0 0% 89.8%;
      --ring: 24 100% 50%;
      --radius: 0.5rem;
    }
    .dark {
      --background: 0 0% 3.9%;
      --foreground: 0 0% 98%;
      --card: 0 0% 3.9%;
      --card-foreground: 0 0% 98%;
      --popover: 0 0% 3.9%;
      --popover-foreground: 0 0% 98%;
      --primary: 24 100% 50%;
      --primary-foreground: 0 0% 98%;
      --secondary: 0 0% 14.9%;
      --secondary-foreground: 0 0% 98%;
      --muted: 0 0% 14.9%;
      --muted-foreground: 0 0% 63.9%;
      --accent: 0 0% 14.9%;
      --accent-foreground: 0 0% 98%;
      --destructive: 0 62.8% 30.6%;
      --destructive-foreground: 0 0% 98%;
      --border: 0 0% 14.9%;
      --input: 0 0% 14.9%;
      --ring: 24 100% 50%;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: hsl(var(--background));
      color: hsl(var(--foreground));
    }
    .container {
      max-width: 80rem;
      margin-left: auto;
      margin-right: auto;
      padding-left: 1rem;
      padding-right: 1rem;
    }
    /* 遊戲卡片圖片放大效果 */
    .zoom-image {
      transition: transform 0.5s ease;
    }
    .zoom-image:hover {
      transform: scale(1.2);
    }
  </style>
</head>
<body>
  <div class="flex min-h-screen flex-col">
    <!-- Header -->
    <header class="sticky top-0 z-50 bg-black border-b border-orange-500">
      <div class="container flex h-16 items-center justify-between">
        <div class="flex items-center gap-2">
          <span data-i18n="logo_text" class="text-orange-500 font-bold text-xl">East Asia Indie Games Celebration</span>
        </div>
        <nav class="hidden md:flex items-center gap-6">
          <a href="#" data-i18n="home" class="text-white hover:text-orange-400 transition-colors">立即報名</a>
          <a href="#news-section" data-i18n="news" class="text-white hover:text-orange-400 transition-colors">NEWS</a>
          <a href="GameExpoAllGame" data-i18n="games" class="text-white hover:text-orange-400 transition-colors">GAMES</a>
          <a href="#contact-section" data-i18n="contact" class="text-white hover:text-orange-400 transition-colors">CONTACT</a>
        </nav>
        <div class="flex items-center gap-4">
          <!-- 語言切換下拉選單 -->
          <select id="language-select" class="bg-black text-white text-sm border border-orange-500 rounded px-1">
            <option value="zh" data-i18n="language_zh">中文</option>
            <option value="en" data-i18n="language_en">EN</option>
            <option value="ja" data-i18n="language_ja">日本語</option>
          </select>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1">
      <!-- Hero Banner -->
      <section class="relative bg-gradient-to-r from-orange-900 to-black">
        <div class="container py-8 md:py-16 relative z-10">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
            <div>
              <h1 data-i18n="hero_title" class="text-4xl md:text-6xl font-bold text-white mb-4">
                East Asia Indie Games Celebration 2025
              </h1>
              <p data-i18n="hero_date" class="text-xl text-white mb-6">2025.6.15 - 2025.6.30</p>
              <p data-i18n="hero_description" class="text-white mb-8">
                The biggest online game sale event of the year with exclusive deals and special offers!
              </p>
            </div>
            <div class="relative h-64 md:h-80">
              <img src="gameExpo/header.png" alt="Game Sale Expo Banner" class="object-contain absolute inset-0 w-full h-full" />
            </div>
          </div>
        </div>
        <div class="absolute inset-0 opacity-20 bg-[url('/placeholder.svg?height=200&width=200')] bg-repeat"></div>
      </section>

      <!-- Featured Deals 輪播區 (一次顯示 8 張) -->
      <section id="deals-section" class="py-12 bg-white">
        <div class="container">
          <div class="flex items-center justify-between mb-8">
            <h2 data-i18n="featured_deals" class="text-2xl font-bold">FEATURED DEALS</h2>
            <div class="flex items-center">
              <button id="prev-deals" class="mr-2 text-orange-500 hover:text-orange-600">
                <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                </svg>
              </button>
			  <a href="GameExpoAllGame.html" data-i18n="games" class="text-orange-400 hover:text-orange-400 transition-colors">GAMES</a>

              <button id="next-deals" class="text-orange-500 hover:text-orange-600">
                <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                </svg>
              </button>
            </div>
          </div>
          <div id="featured-deals-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- 遊戲卡片由 JS 動態注入 -->
          </div>
        </div>
      </section>

      <!-- News 區塊 (展開後內容自動適應高度) -->
      <section id="news-section" class="py-12 bg-gray-50">
        <div class="container">
          <div class="flex items-center justify-between mb-8">
            <h2 data-i18n="news_section" class="text-2xl font-bold flex items-center gap-2">
              <span class="inline-block w-1 h-6 bg-orange-500"></span>
              NEWS
            </h2>
          </div>
          <div class="space-y-4">
            <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-4">
              <div class="flex items-center gap-4">
                <div class="text-sm text-gray-500 whitespace-nowrap">2025.03.26</div>
                <div class="flex-1">
                  <h3 data-i18n="news_item" class="font-medium hover:text-orange-500">
                    Game Sale Expo 2025 announces special publisher deals and exclusive game bundles
                  </h3>
                </div>
                <button class="news-toggle-btn text-orange-500 bg-transparent">
                  <span data-i18n="expand">Expand</span>
                </button>
              </div>
              <!-- 新聞完整內容，隱藏中 -->
              <div class="news-full-content hidden text-gray-700 mt-4" data-i18n="news_full_item_1">
                Full content of news item 1 in English. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
              </div>
            </div>
            <div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-4">
              <div class="flex items-center gap-4">
                <div class="text-sm text-gray-500 whitespace-nowrap">2025.04.10</div>
                <div class="flex-1">
                  <h3 data-i18n="news_item2" class="font-medium hover:text-orange-500 transition-colors">
                    Game Sale Expo 2025 announces special publisher deals and exclusive game bundles
                  </h3>
                </div>
                <button class="news-toggle-btn text-orange-500 bg-transparent">
                  <span data-i18n="expand">Expand</span>
                </button>
              </div>
              <div class="news-full-content hidden text-gray-700 mt-4" data-i18n="news_full_item_2">
                Full content of news item 2 in English. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Participating Publishers 區 (從 CSV 動態生成) -->
      <section class="py-12 bg-white">
        <div class="container">
          <h2 data-i18n="participating_publishers" class="text-2xl font-bold text-center mb-8 flex flex-col items-center">
            <span class="inline-block w-12 h-1 bg-orange-500 mb-2"></span>
            PARTICIPATING PUBLISHERS
          </h2>
          <div id="publishers-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6">
            <!-- 廠商項目由 JS 動態注入 -->
          </div>
        </div>
      </section>

      <!-- Contact 與 Newsletter 區塊
      <section id="contact-section" class="py-12 bg-gray-50">
        <div class="container">
          <div class="max-w-2xl mx-auto text-center">
            <h2 data-i18n="contact_us" class="text-2xl font-bold mb-4 flex flex-col items-center">
              <span class="inline-block w-12 h-1 bg-orange-500 mb-2"></span>
              CONTACT US
            </h2>
            <p data-i18n="contact_description" class="text-gray-600 mb-8">
              Have questions about the Game Sale Expo? Contact our team for more information.
            </p>
            <a href="mailto:filtergametw@gmail.com" 
               data-i18n="contact_button"
               class="bg-orange-500 hover:bg-orange-600 text-white px-8 py-2 inline-block">
              CONTACT US
            </a>
          </div>
        </div>
      </section> -->
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white border-t border-orange-500">
      <div class="container py-8">
        <div class="flex flex-col md:flex-row justify-between items-center gap-4">
          <div class="flex items-center gap-2">
            <span data-i18n="logo_text" class="text-orange-500 font-bold">GAME SALE EXPO</span>
          </div>
          <div class="flex items-center gap-4">
			<a href="#" data-i18n="organizer" class="text-gray-400 ">舉辦單位:</a>
            <a href="https://lit.link/hanwagame" target="_blank" class="text-gray-400 hover:text-white transition-colors">焊蛙遊戲</a>
            <a href="https://linktr.ee/yohcanstudio" target="_blank" class="text-gray-400 hover:text-white transition-colors">葉開罐工作室</a>
            <a href="https://www.arcadegalaxy.space/" target="_blank" class="text-gray-400 hover:text-white transition-colors">第九商行</a>
            <a href="https://filtergame.com/" target="_blank" class="text-gray-400 hover:text-white transition-colors">FilterGame</a>
          </div>
		<!--  
          <div class="flex items-center gap-4">
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <div class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center">X</div>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <div class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center">f</div>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <div class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center">in</div>
            </a>
          </div>
		  -->
		  
        </div>
        <div data-i18n="copyright" class="text-center text-gray-500 text-sm mt-8">© 2025 East Asia Indie Games Celebration. All rights reserved.</div>
      </div>
    </footer>
  </div>

  <!-- JavaScript：多國語系、Featured Deals 輪播、News 展開、以及 Publishers CSV 生成 -->
  <script>
    // 多國語系字串定義（以中文版為基礎，新翻譯覆蓋原英文/日文）
    const translations = {
      en: {
        logo_text: "East Asia Indie Games Celebration",
        home: "Home",
        news: "News",
        deals: "Deals",
        games: "Games",
        contact: "Contact",
        browse_deals: "Register Now",
        hero_title: "East Asia Indie Games Celebration 2025",
        hero_date: "August 5, 2025 - August 19, 2025",
        hero_description: "We sincerely invite independent game development teams from across East Asia (including Taiwan, China, Japan, Korea, Hong Kong, Macau, and other East Asian regions) to participate in this grand online game sale event and showcase our rich and diverse creative game culture.",
        featured_deals: "Games & Special Offers",
        news_section: "News",
        news_item: "East Asia Indie Games Celebration - Registration Open!",
        news_item2: "East Asia Indie Games Celebration - First Batch of Participants Announced",
        news_full_item_1: "We sincerely invite independent game development teams from across East Asia (including Taiwan, China, Japan, Korea, Hong Kong, Macau, and other East Asian regions) to participate in this grand online game sale event. Please submit your game details by April 4, 2025 (GMT+8) for initial approval.",
        news_full_item_2: "East Asia Indie Games Celebration - First Batch of Participants Announced!",
        news_full_item_3: "Full content of news item 3. (Sample text, please modify as needed.)",
        participating_publishers: "Participating Publishers",
        contact_us: "Contact Us",
        contact_description: "If you have any questions about the event, please contact our team for more information.",
        contact_button: "Contact Us",
        newsletter_title: "Game Sale Expo Newsletter",
        newsletter_description: "Subscribe to our newsletter to receive the latest offers and event updates.",
        subscribe: "Subscribe",
        privacy: "Privacy",
        terms: "Terms",
        about: "About",
        footer_contact: "Contact",
        language_en: "EN",
        language_zh: "中文",
        language_ja: "日本語",
        expand: "Expand",
        collapse: "Collapse",
        not_released: "Game Not Yet Released",
        demo_open: "Demo Version Available!",
        copyright: "© 2025 East Asia Indie Games Celebration. All rights reserved.",
		organizer: "Organizer:"
      },
      zh: {
        logo_text: "東亞獨立遊戲慶典",
        home: "首頁",
        news: "新聞",
        deals: "特賣",
        games: "全部遊戲",
        contact: "聯絡",
        browse_deals: "立即報名",
        hero_title: "東亞獨立遊戲慶典 2025",
        hero_date: "2025年8月5日至2025年8月19日",
        hero_description: "我們誠摯邀請來自東亞各地（包含台灣、中國、日本、韓國、香港、澳門及其他東亞區域）的獨立遊戲開發團隊，共同參與這場盛大的線上遊戲特賣會，展現我們豐富多元的創意遊戲文化。",
        featured_deals: "遊戲&特色優惠",
        news_section: "新聞",
        news_item: "東亞獨立遊戲慶典-報名開始!",
        news_item2: "東亞獨立遊戲慶典-公布第一批參展名單",
        news_full_item_1: "我們誠摯邀請來自東亞各地（包含台灣、中國、日本、韓國、香港、澳門及其他東亞區域）的獨立遊戲開發團隊，共同參與這場盛大的線上遊戲特賣會，展現我們豐富多元的創意遊戲文化。請於2025年4月4日前填寫遊戲資料。",
        news_full_item_2: "東亞獨立遊戲慶典-公布第一批參展名單!",
        news_full_item_3: "新聞項目 3 的完整內容。示例文本，請根據需求修改。",
        participating_publishers: "參與廠商",
        contact_us: "聯絡我們",
        contact_description: "對於遊戲特賣博覽有疑問？請聯絡我們的團隊獲得更多資訊。",
        contact_button: "聯絡我們",
        newsletter_title: "遊戲特賣博覽電子報",
        newsletter_description: "訂閱我們的電子報，獲得最新優惠和活動資訊。",
        subscribe: "訂閱",
        privacy: "隱私",
        terms: "條款",
        about: "關於",
        footer_contact: "聯絡",
        language_en: "EN",
        language_zh: "中文",
        language_ja: "日本語",
        expand: "展開",
        collapse: "收起",
        not_released: "遊戲尚未推出",
        demo_open: "試玩版開放中!",
        copyright: "© 2025 東亞獨立遊戲慶典。版權所有。",
		organizer: "舉辦單位:"
      },
      ja: {
        logo_text: "東亞インディーゲームセレブレーション",
        home: "ホーム",
        news: "ニュース",
        deals: "セール",
        games: "ゲーム",
        contact: "連絡先",
        browse_deals: "今すぐ申し込む",
        hero_title: "東亞インディーゲームセレブレーション 2025",
        hero_date: "2025年8月5日〜2025年8月19日",
        hero_description: "台湾、中国、日本、韓国、香港、マカオ、その他東亞地域のインディーゲーム開発チームの皆様を心よりご招待し、この盛大なオンラインゲームセールイベントで多彩なクリエイティブ文化を発信していただきます。",
        featured_deals: "ゲーム＆特別オファー",
        news_section: "ニュース",
        news_item: "東亞インディーゲームセレブレーション－募集開始！",
        news_item2: "東亞インディーゲームセレブレーション－第一陣の参加者発表",
        news_full_item_1: "台湾、中国、日本、韓国、香港、マカオ、その他東亞地域のインディーゲーム開発チームの皆様を心よりご招待いたします。2025年4月4日までにゲーム情報を提出してください。",
        news_full_item_2: "東亞インディーゲームセレブレーション－第一陣の参加者発表！",
        news_full_item_3: "ニュース項目3の完全な内容。（サンプルテキスト、必要に応じて修正してください。）",
        participating_publishers: "参加出版社",
        contact_us: "お問い合わせ",
        contact_description: "イベントに関するご質問は、ぜひ当チームまでお問い合わせください。",
        contact_button: "お問い合わせ",
        newsletter_title: "ゲームセールエキスポ ニュースレター",
        newsletter_description: "最新のオファーとイベント情報を受け取るために、ニュースレターにご登録ください。",
        subscribe: "購読",
        privacy: "プライバシー",
        terms: "利用規約",
        about: "概要",
        footer_contact: "お問い合わせ",
        language_en: "EN",
        language_zh: "中文",
        language_ja: "日本語",
        expand: "展開",
        collapse: "折りたたむ",
        not_released: "ゲーム未発売",
        demo_open: "体験版公開中！",
        copyright: "© 2025 東亞インディーゲームセレブレーション。全著作権所有。",
		organizer: "主催者:"
      }
    };

    // 預設語系
    let currentLanguage = "zh";
    // 儲存 Featured Deals 與 Publishers CSV 資料
    let featuredDealsData = [];
    let publishersData = [];
    // 輪播目前起始索引（一次顯示 8 個）
    let currentCarouselIndex = 0;

    // 更新所有 data-i18n 文字
    function updateTranslations() {
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        if (translations[currentLanguage][key]) {
          el.textContent = translations[currentLanguage][key];
        }
      });
      updateNewsToggleButtons();
    }

    // 產生 Featured Deals 卡片，一次顯示 8 個
    function generateFeaturedDeals(data) {
      const container = document.getElementById("featured-deals-container");
      container.innerHTML = "";
      const total = data.length;
      for (let i = 0; i < 16; i++) {
        const idx = (currentCarouselIndex + i) % total;
        const row = data[idx];
        const title = row["title_" + currentLanguage] || row.title_en;
        const price = parseFloat(row.price);
		const tag = row.game_type;
        const bargainPrice = parseFloat(row.bargain_price);
        // 解析 steamLink 中的 appId（格式例如 /app/440/ ）
        const match = row.steamLink.match(/\/app\/(\d+)/);
        let imageUrl = "";
        if (match) {
          const appId = match[1];
          // 使用新的圖片來源 URL
          imageUrl = `https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/${appId}/header.jpg`;
        } else {
          imageUrl = `/placeholder.svg?height=300&width=400&text=${encodeURIComponent(title)}`;
        }

        // 建立卡片
        const card = document.createElement("div");
        card.className = "border border-gray-200 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow";

        const imgWrapper = document.createElement("div");
        imgWrapper.className = "relative h-48";
        const link = document.createElement("a");
        link.href = row.steamLink;
        link.target = "_blank";
        const img = document.createElement("img");
        img.src = imageUrl;
        img.alt = title;
        // 加入 zoom-image 類別以達成放大效果
        img.className = "object-cover absolute inset-0 w-full h-full zoom-image";
        link.appendChild(img);
        imgWrapper.appendChild(link);
        // 僅當原價與特價不相同且非特殊狀態時顯示折扣標籤
      //  if (price !== bargainPrice && price !== -1 && bargainPrice !== -1 && price !== -2 && bargainPrice !== -2) {
      //    const discount = Math.round((1 - bargainPrice / price) * 100);
      //    const discountTag = document.createElement("div");
      //    discountTag.className = "absolute top-2 right-2 bg-orange-500 text-white px-2 py-1 rounded font-bold";
      //    discountTag.textContent = "-" + discount + "%";
      //    imgWrapper.appendChild(discountTag);
      //  }
        card.appendChild(imgWrapper);

        // 遊戲資訊區
        const cardBody = document.createElement("div");
        cardBody.className = "p-4";
        const h3 = document.createElement("h3");
        h3.className = "font-bold mb-1";
        h3.textContent = title;
        cardBody.appendChild(h3);

        const infoDiv = document.createElement("div");
        infoDiv.className = "flex items-center justify-between mb-2";

		if (price === -1 )
		{
		    const infoDiv = document.createElement("div");
			infoDiv.className = "flex items-center justify-between mb-2";
			infoDiv.textContent = tag;
		}


        cardBody.appendChild(infoDiv);
        card.appendChild(cardBody);
        container.appendChild(card);
      }
    }

    // 讀取 deals.csv 並生成 Featured Deals 輪播
    function loadDealsCSV() {
      Papa.parse("deals.csv", {
        download: true,
        header: true,
        complete: function(results) {
          featuredDealsData = results.data;
          generateFeaturedDeals(featuredDealsData);
        }
      });
    }

    // Publisher CSV 生成：讀取 publishers.csv（欄位：logo, link）
	  function generatePublishers(data) {
		const container = document.getElementById("publishers-container");
		container.innerHTML = "";

		data.forEach(row => {
		  // 外層 a 標籤改為 flex-col 以垂直排列
		  const a = document.createElement("a");
		  a.href = row.link;
		  a.target = "_blank";
		  a.className = "flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow";

		  // Logo 圖片
		  const img = document.createElement("img");
		  img.src = `logos/${row.logo}`;
		  img.alt = row.name;
		  img.width = 120;
		  img.height = 80;
		  img.className = "object-contain";
		  a.appendChild(img);

		  // 在圖片下方加入 name 文字，並設 data-i18n
		  const nameEl = document.createElement("div");
		  nameEl.textContent = row.name;
		  nameEl.setAttribute("data-i18n", row.name);
		  nameEl.className = "mt-2 text-center font-medium";
		  a.appendChild(nameEl);

		  container.appendChild(a);
		});
	  }
	
	function loadPublishersCSV() {
	  Papa.parse("publishers.csv", {
		download: true,
		header: true,
		skipEmptyLines: true,
		transformHeader: header => header.trim(), // 自動去除 header 的空白
		complete: function(results) {
		  publishersData = results.data;
		  generatePublishers(publishersData);
		}
	  });
	}

    // 輪播按鈕事件（以 8 個一組）
    document.getElementById("next-deals").addEventListener("click", () => {
      if (featuredDealsData.length) {
        currentCarouselIndex = (currentCarouselIndex + 16) % featuredDealsData.length;
        generateFeaturedDeals(featuredDealsData);
      }
    });
    document.getElementById("prev-deals").addEventListener("click", () => {
      if (featuredDealsData.length) {
        currentCarouselIndex = (currentCarouselIndex - 16 + featuredDealsData.length) % featuredDealsData.length;
        generateFeaturedDeals(featuredDealsData);
      }
    });

    // News 區塊：切換展開／收起完整內容（讓內容容器自適應高度）
    function updateNewsToggleButtons() {
      document.querySelectorAll(".news-toggle-btn").forEach(btn => {
        const fullContent = btn.closest("div.bg-white").querySelector(".news-full-content");
        if (fullContent && !fullContent.classList.contains("hidden")) {
          btn.innerHTML = `<span>${translations[currentLanguage].collapse}</span>`;
        } else {
          btn.innerHTML = `<span>${translations[currentLanguage].expand}</span>`;
        }
      });
    }
    document.querySelectorAll(".news-toggle-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        const fullContent = btn.closest("div.bg-white").querySelector(".news-full-content");
        if (fullContent) {
          fullContent.classList.toggle("hidden");
          updateNewsToggleButtons();
        }
      });
    });

    // 初始載入：更新翻譯、讀取 CSV
    document.addEventListener("DOMContentLoaded", () => {
      updateTranslations();
      loadDealsCSV();
      loadPublishersCSV();
    });

    // 語言切換
    document.getElementById("language-select").addEventListener("change", (e) => {
      currentLanguage = e.target.value;
      updateTranslations();
      if (featuredDealsData.length) {
        generateFeaturedDeals(featuredDealsData);
      }
    });
  </script>
</body>
</html>
